tinymce.PluginManager.add("rsproductlink",function(t,o){let e="rs-product-link-div"+t.id;$('<div id="'+e+'" class="hide-group-cb hide-product-cb"><a class="select-button hidden"></a></div>').data("urls",t.settings.rsProductDialog.url).appendTo("body"),$("#"+e).selectProduct({dialog:"productLinkDialog-"+t.id,selectButtonText:!1,onSelectProduct:function(o){$.ajaxQuery({url:t.settings.rsProductDialog.url.getProductLink,data:{product_id:o.productId,link_type:t.settings.rsProductDialog.linkType},success:function(e){let i=$("<a>").attr("href",e.absolute_url).text(o.productTitle).prop("outerHTML");t.execCommand("mceInsertContent",!1,i+" ")}}),o.dialog.dialog("close")}});let i=function(t){$("#"+e+" .select-button").click()};return t.ui.registry.addButton("rsproductlink",{tooltip:lang.t("Вставить ссылку на товар"),icon:"plus",onAction:function(){i(t)}}),{getMetadata:function(){return{name:"ReadyScript product link plugin",url:"https://readyscript.ru"}}}});