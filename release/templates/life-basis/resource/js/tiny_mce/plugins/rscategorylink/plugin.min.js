tinymce.PluginManager.add("rscategorylink",function(t,e){let i="rs-category-link-div"+t.id;$('<div id="'+i+'" class="hide-group-cb hide-product-cb"><a class="select-button hidden"></a></div>').appendTo("body"),$("#"+i).selectProduct({dialog:"categoryLinkDialog-"+t.id,urls:t.settings.rsProductDialog.url,onResult:function(e){e.openDialogEvent.target;let i=$("#categoryLinkDialog-"+t.id+" .admin-category .act"),n=i.text(),r=i.closest("[qid]").attr("qid");$.ajaxQuery({url:t.settings.rsProductDialog.url.getCategoryLink,data:{dir_id:r,link_type:t.settings.rsProductDialog.linkType},success:function(e){if(e.success){let i=$("<a>").attr("href",e.absolute_url).text(n).prop("outerHTML");t.execCommand("mceInsertContent",!1,i+" ")}}})}});let n=function(t){$("#"+i+" .select-button").click()};return t.ui.registry.addButton("rscategorylink",{tooltip:lang.t("Вставить ссылку на категорию товаров"),icon:"non-breaking",onAction:function(){n(t)}}),{getMetadata:function(){return{name:"ReadyScript category link plugin",url:"https://readyscript.ru"}}}});